阶段 4 调试：修复异常重复触发的 Bug，定位 CSR 读出 Bug

本次提交修复了在阶段 4 测试中发现的关键 bug。

## Bug #1：异常重复触发（已修复）

问题：未对齐的读/写异常导致无限循环
- 异常单元在 MEM 阶段持续检测到故障
- 发生故障的指令在 EX/MEM 寄存器中保持 valid=1
- 流水线冲刷没有使 EX/MEM 阶段失效
- 结果：陷入陷阱处理程序的无限循环

修复方式：跟踪异常发生并在下一周期使 EX/MEM 失效
- 新增 exception_taken_r 寄存器用于跟踪上一周期的异常
- 当 exception_taken_r=1 时使 EX/MEM 阶段失效
- 允许陷阱处理程序执行而不会被再次触发

修改文件：
- rtl/core/rv32i_core_pipelined.v：
  - 第 214-220 行：新增 exception_taken_r 寄存器
  - 第 583 行：修改 EX/MEM valid_in，使其在 !exception_taken_r 时才为真

## Bug #2：CSR 读返回 0（未修复——仅记录）

问题：所有 CSR 读操作都返回 0 而不是实际 CSR 值
- 示例：csrr x2, mstatus → x2 = 0（应为 mstatus 的值）
- 导致所有异常处理功能被阻塞
- 来自阶段 4 第 2 部分提交（af5a599）的既有 bug

状态：已定位但未在此提交中修复
- CSR 文件输出正确（通过单元测试验证）
- Bug 出在流水线集成处（EX/MEM 或 MEM/WB 寄存器）
- 调试指南参见 DEBUG_CSR_READ_BUG.md

影响：
- `ma_data` 一致性测试仍然失败（超时）
- 异常处理程序无法读取 mcause、mepc、mtval
- 一致性测试结果保持在 40/42（95%）

## 测试

新建测试程序：
- tests/asm/test_misaligned_simple.s —— 测试异常处理
- /tmp/test_csr_read.s —— 最小 CSR 读测试

## 后续步骤

1. 修复 CSR 读 bug（关键）
2. 在 CSR 读正常的情况下重新测试异常处理
3. 目标一致性：41/42（97%），使 ma_data 通过

## 新增文档

- NEXT_SESSION_PHASE4_PART3.md —— 下一次调试会话的详细指南
- SESSION_SUMMARY_2025-10-10_phase4_part2_debug.md —— 调试会话总结
- DEBUG_CSR_READ_BUG.md —— CSR bug 调试指南
- PHASES.md —— 更新当前阶段状态

🤖 由 Claude Code 生成（https://claude.com/claude-code）

联合作者：Claude <noreply@anthropic.com>
